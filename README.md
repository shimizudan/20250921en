# 四角形面積最大化ツール

4辺の長さが与えられた時、その辺で構成できる凸四角形の中で面積が最大となるものを求めるWebアプリケーションです。

## 🔗 デモサイト

[https://shimizudan.github.io/quadrilateral-area-maximizer/](まだ公開していません)

## ✨ 特徴

- **数学的に正確な計算**: ピトー条件を満たす場合はブラーマグプタ公式、そうでない場合は対角線直交時の推定上限を使用
- **視覚的な結果表示**: 最適化された四角形をCanvas上に描画
- **詳細な解析情報**: 内角、座標、検証結果を表示
- **レスポンシブデザイン**: PCからモバイルまで対応

## 🧮 数学的背景

### ブラーマグプタの公式
ピトー条件 `a + c = b + d` を満たす内接円四角形の場合、面積の理論上限は：

```
面積 = √[(s-a)(s-b)(s-c)(s-d)]
s = (a+b+c+d)/2
```

### 一般四角形の場合
ピトー条件を満たさない場合は、対角線が直交する時の推定上限を使用：

```
推定上限 = (a+c) × (b+d) / 2
```

## 🚀 使用方法

1. 4つの辺の長さ（a, b, c, d）を入力
2. 「面積最大化を計算」ボタンをクリック
3. 結果を確認：
   - 理論上限と実際の最大面積
   - 効率（理論上限に対する比率）
   - 最適な内角
   - 頂点座標
   - 四角形の可視化

## 🔧 技術仕様

- **言語**: HTML, CSS, JavaScript (バニラ)
- **アルゴリズム**: グリッドサーチ最適化
- **描画**: HTML5 Canvas
- **数学計算**: 
  - 円の交点計算
  - 凸性判定
  - Shoelace公式による面積計算
  - 内角計算

## 📊 アルゴリズム

1. **入力検証**: 三角不等式のチェック
2. **理論上限計算**: ピトー条件に基づく適切な上限設定
3. **グリッドサーチ**: 
   - 主要アルゴリズム: 内角βを変化させる1次元探索
   - フォールバック: 基本的な角度スイープ
4. **四角形構築**: 円の交点を利用した幾何学的構築
5. **検証**: 凸性と辺の長さの確認

## 🎯 精度と性能

- **許容誤差**: 辺の長さで20%、角度計算で約6度
- **探索範囲**: 30度〜150度の内角範囲
- **計算時間**: 通常1-3秒（100-200回の反復）

## 📁 ファイル構成

```
├── index.html           # メインのWebアプリケーション
├── corrected_quadrilateral.jl    # Julia版アルゴリズム（修正版）
├── improved_quadrilateral.jl     # Julia版アルゴリズム（改良版）
├── 921001.ipynb         # Jupyter Notebook（実験・検証用）
└── README.md           # このファイル
```

## 🔬 検証

以下のテストケースで動作確認済み：

| 辺の長さ | ピトー偏差 | 期待結果 |
|---------|-----------|---------|
| (3,4,5,6) | 2.0 | 一般四角形 |
| (4,5,4,5) | 0.0 | 内接円四角形 |
| (3,4,4,3) | 0.0 | 内接円四角形 |
| (5,5,5,5) | 0.0 | 正方形 |

## 🎓 教育用途

このツールは以下の学習に適しています：

- 計算幾何学
- 最適化アルゴリズム
- 数値解析
- Web開発（JavaScript, Canvas）
- 数学可視化

## 📝 ライセンス

MIT License

## 👨‍💻 開発者

Shimizu Dan
- GitHub: [@shimizudan](https://github.com/shimizudan)

## 🙏 謝辞

- ブラーマグプタの公式とピトー定理の数学的基礎
- 計算幾何学アルゴリズムの参考文献
- Julia言語での初期プロトタイピング

---

**注意**: このアプリケーションは教育・研究目的で開発されました。商用利用の際は適切な検証を行ってください。